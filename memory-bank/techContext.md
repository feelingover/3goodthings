# 3 Good Things - 技術コンテキスト

## 技術スタック概要

### フロントエンド
- **メインフレームワーク**: React 19.1.0
- **言語**: TypeScript 5.8.3
- **ビルドツール**: Vite 6.3.5
- **スタイリング**: CSS (Material Design 3 システム)
- **PWA対応**: vite-plugin-pwa 1.0.0
- **デザインシステム**: Material Design 3 (CSS変数ベース)

### データストレージ
- **クライアントDB**: IndexedDB (Dexie.js 4.0.11)
- **キャッシュ**: Service Worker (Workbox 7.3.0)

### 外部サービス
- **AI統合**: OpenAI API (openai 4.98.0)

### テスト
- **フレームワーク**: Jest 29.7.0
- **UIテスト**: React Testing Library 16.3.0

## 開発環境

### 必要条件
- Node.js (最新LTS以降推奨)
- npm (最新バージョン推奨)

### 環境変数
```
VITE_OPENAI_API_KEY="your-api-key-here" // OpenAI APIキー
VITE_OPENAI_MODEL="gpt-4o"              // 使用するモデル
```

### 開発コマンド
- `npm install`: 依存関係インストール
- `npm run dev`: 開発サーバー起動 (Vite)
- `npm run build`: プロダクションビルド
- `npm run preview`: ビルド結果のプレビュー
- `npm test`: Jestテスト実行
- `npm run lint`: ESLintによるコード検証

## 主要依存関係

### コア依存関係
- **React**: UIコンポーネントとレンダリング
- **Dexie.js**: IndexedDBのラッピングライブラリ
- **OpenAI**: OpenAI APIとの通信クライアント
- **Workbox**: PWA用Service Workerライブラリ

### 開発依存関係
- **TypeScript**: 静的型付け
- **Vite**: 高速ビルドツール
- **ESLint**: コード品質チェック
- **Jest/RTL**: テストフレームワーク

## UIデザインシステム

### Material Design 3の実装
- **デザイントークン**: CSS変数を使用したデザイン値の一元管理
- **カラーシステム**: プライマリ、セカンダリ、サーフェスカラーの体系的な適用
- **タイポグラフィ**: 階層的なフォントスケールと視認性重視の設定
- **コンポーネントシステム**: Material Designガイドラインに準拠したUI要素
- **エレベーション**: 影によるインターフェース階層の表現
- **インタラクション**: 統一されたアニメーションとトランジション

### カスタムCSS変数
```css
:root {
  --md-primary: #6750A4;
  --md-primary-light: #D0BCFF;
  --md-primary-dark: #381E72;
  --md-secondary: #625B71;
  --md-surface: #FFFBFE;
  --md-background: #F6F6F6;
  
  /* その他のデザイン変数 */
}
```

## クライアント環境要件

### ブラウザ対応
- 最新のChrome, Firefox, Safari, Edge
- IndexedDBをサポートするブラウザ環境

### パフォーマンス
- 低～中程度のCPU/メモリ使用量
- オフライン動作可能

### ストレージ
- IndexedDBによるデータ保存
- 長期使用でも比較的小さなストレージ使用量

## アーキテクチャの技術的制約

### クライアントサイドのみの構成
- サーバーレスアーキテクチャ
- すべてのデータ処理をクライアント側で実行

### OpenAI API依存
- オンライン時のみAIコメント機能が利用可能
- APIキー管理はクライアント側（セキュリティ上の注意点）

### IndexedDBの制限
- ブラウザのストレージ制限に依存
- クライアント側での永続化のみ（クラウド同期なし）

## デプロイ/配布方法

### Webアプリケーション
- 静的ホスティングサービス（GitHub Pages, Netlifyなど）での配布
- PWAとしてインストール可能

### オフライン対応
- Service Workerによるアセットのキャッシュ
- オフライン起動と基本機能の確保

## セキュリティ考慮事項

### APIキー
- クライアントサイドでのAPIキー保管（リスクあり）
- 環境変数およびビルド時の注入

### データプライバシー
- すべてのデータはローカル保存のみ
- 外部サーバーへのデータ送信は特定機能（AIコメント）のみ

## ビルド/パッケージング

### ビルドプロセス
1. TypeScriptコンパイル
2. Viteによるバンドル
3. PWA用Service Workerの生成
4. 静的アセットの最適化

### 成果物
- HTML/CSS/JSの最適化されたバンドル
- Service Workerファイル
- マニフェストファイル（PWA用）
- アイコンセット

## パフォーマンス最適化

### レンダリングパフォーマンス
- React最新バージョンの利用によるレンダリング最適化
- CSS変数による効率的なスタイル計算

### ネットワーク最適化
- アセットのプリキャッシング
- オフライン対応による通信量削減

### データ管理最適化
- IndexedDBによる効率的なデータクエリ
- インデックス設計による検索最適化

## アクセシビリティ

### 現在の対応状況
- 色コントラスト比の確保
- フォーカス可能な要素の明示的なアウトライン

### 今後の改善点
- WAI-ARIA属性の追加
- キーボードナビゲーションの最適化
- スクリーンリーダー対応の強化

## UXデザイン改善計画

### フィードバックメカニズム
- アニメーションによるユーザーアクション結果の視覚化
- エラー表示の改善とガイダンス提供

### レスポンシブ設計
- モバイル、タブレット、デスクトップ対応のレイアウト
- タッチインタラクションの最適化

### 今後の検討項目
- ダークモードの実装
- さらなるアニメーションの洗練
- ユーザー設定オプションの追加
